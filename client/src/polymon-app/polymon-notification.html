<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="polymon-element.html">
<link rel="import" href="polymon-styles.html">

<dom-module id="polymon-notification">
  <template>
    <style>
      :host {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        position: absolute;
        top: 0;
        left: 0;
        box-sizing: border-box;
        width: 100%;
        padding: 1em;
        color: rgba(0, 0, 0, 0.65);
        background-color: rgba(255, 255, 255, 0.9);
        font-family: var(--polymon-font-family);
        z-index: 10;

        opacity: 0;
        transform: translateY(-10%);
        transition: transform 0.3s, opacity 0.3s;
        transition-delay: 0s;
        pointer-events: none;
      }

      :host(.active) {
        opacity: 1;
        transform: translateY(0);
        transition-delay: 0.2s;
        pointer-events: all;
      }

      :host:before {
        content: '';
        display: block;
        flex: 0 0 auto;
        vertical-align: middle;
        line-height: 1em;
        margin: 0.5em 1em 0.5em 0.5em;
        background-image: url(/images/polymon_sprite_sheet.svg);
        background-size: 1000%;
        background-position: calc(-3/9 * 100%) calc(-3/9 * 100%);
        width: 32px;
        height: 32px;
      }

      :host(.error):before {
        background-position: calc(-1/9 * 100%) calc(-3/9 * 100%);
      }

      #content {
        flex: 1;
      }

      #button {
        color: #fafafa;
        background-color: #1ca6fc;
        box-shadow: 0px 1px 0px #09537E;
        border-radius: 4px;
        line-height: 1em;
        padding: 1em;
        margin: 0.5em;
      }

      :host(.error) #button {
        background-color: #EC4236;
        box-shadow: 0px 1px 0px #8C0300;
      }
    </style>
    <span id="content">[[message]]</span>
    <div id="button">OK</div>
  </template>
  <script>
    Polymer({
      is: 'polymon-notification',

      behaviors: [PolymonElement],

      properties: {
        message: {
          type: String
        },

        type: {
          type: String,
          observer: '__typeChanged'
        }
      },

      listeners: {
        'button.tap': '__onButtonTap'
      },

      __typeChanged: function(type, oldType) {
        if (oldType != null) {
          this.classList.remove(oldType);
        }
        if (type != null) {
          this.classList.add(type);
        }
      },

      __onButtonTap: function() {
        this.fire('acknowledged');
        this.active = false;
      }
    })
  </script>
</dom-module>
