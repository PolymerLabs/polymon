<script>
  (() => {
    window.PolymonElement = {
      properties: {
        user: {
          type: Object
        },

        route: {
          type: Object,
          notify: true
        },

        active: {
          type: Boolean,
          value: false,
          observer: 'invalidateClassname'
        }
      },

      created: function() {
        this.__rafs = {};
      },

      deraf: function(name, fn) {
        if (this.__rafs[name]) {
          return;
        }

        this.__rafs[name] = requestAnimationFrame(() => {
          this.__rafs[name] = null;
          fn();
        });
      },

      invalidateClassname: function() {
        if (this.active) {
          this.classList.add('active');
        } else {
          this.classList.remove('active');
        }
      }
    };
  })();
</script>
