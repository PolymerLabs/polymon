<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-behaviors/iron-control-state.html">
<link rel="import" href="../../bower_components/iron-behaviors/iron-button-state.html">
<dom-module id="polymon-button">
  <template>
    <style>
      :host {
        --polymon-button-background: #536DFE; /* Indigo A200 */
        --polymon-button-shadow: #435DEE; /* Indigo A200 - #101010 */

        -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
        -webkit-tap-highlight-color: transparent;

        display: inline-block;
        position: relative;
        background-color: var(--polymon-button-shadow);
        box-sizing: border-box;
        border-radius: 4px;
        font-family: var(--polymon-font-family);
        font-weight: bolder;
        cursor: pointer;
        text-align: center;
        padding: 0 0 4px 0;
      }

      :host(.alt) {
        --polymon-button-background: #1CE8B5; /* Teal A400 */
        --polymon-button-shadow: #0CD8A5; /* Teal A400 - #101010 */
      }

      :host:before {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 4px;
        border-radius: 4px;
        background-color: var(--polymon-button-background);
      }

      /* TODO(bicknellr): Get specs for the selected state. */
      :host(.iron-selected) {
        background-color: #00D4EF; /* Cyan A400 - #101010 */
      }
      :host(.iron-selected):before {
        background-color: #00E4FF; /* Cyan A400 */
      }

      #content {
        position: relative;
        padding: 7px 20px 5px;
        margin: 4px;
        border-radius: 2px;
        z-index: 1;
        color: #FFFFFF;
        pointer-events: none;
        -webkit-user-select: none;
      }

      :host(.pressed) {
        padding: 4px 0 0 0;
        background-color: transparent;
      }
      :host(.pressed):before {
        top: 4px;
        bottom: 0;
      }
    </style>
    <div id="content">
      <content></content>
    </div>
  </template>
  <script>
    [Polymer.IronControlState, Polymer.IronButtonState[1]].forEach(behavior => {
      for (let propertyName in behavior.properties) {
        let propertyValue = behavior.properties[propertyName];
        if (propertyValue && propertyValue.reflectToAttribute) {
          propertyValue.reflectToAttribute = false;
        }
      }
    });

    Polymer({
      is: 'polymon-button',

      behaviors: [
        Polymer.IronControlState,
        Polymer.IronButtonState
      ],

      observers: [
        '__pressedChanged(pressed)',
        '__activated(toggles, active)'
      ],

      __pressedChanged: function() {
        if (this.pressed) {
          this.classList.add('pressed');
        } else {
          this.classList.remove('pressed');
        }
      },

      __activated: function(toggles, active) {
        if (toggles && active) {
          this.classList.add('active');
        } else {
          this.classList.remove('active');
        }
      }
    });
  </script>
</dom-module>
